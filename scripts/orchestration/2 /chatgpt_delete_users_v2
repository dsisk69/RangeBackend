# Path to the CSV file
$csvFile = "user_list.csv"

# Import the CSV file
$userList = Import-Csv -Path $csvFile

# Loop through the user list
foreach ($user in $userList) {
    $firstName = $user.FirstName
    $lastName = $user.LastName
    $password = $user.Password
    
    # Generate username based on first name and last name
    $username = ($firstName + $lastName).ToLower()

    # Check if the user exists
    $userExists = Get-LocalUser -Name $username -ErrorAction SilentlyContinue
    
    if ($userExists -ne $null) {
        # Delete the user
        Remove-LocalUser -Name $username -Force
        Write-Host "Deleted user: $username"
    }
    else {
        Write-Host "User not found: $username"
    }
}
